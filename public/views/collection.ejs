<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OCM || Collection</title>
  <meta name="robots" content="noindex, follow" />
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="theme-style-mode" content="0"> <!-- 0 == light, 1 == dark -->

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png">
  <!-- CSS 
    ============================================ -->
  <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/vendor/slick.css">
  <link rel="stylesheet" href="assets/css/vendor/slick-theme.css">
  <link rel="stylesheet" href="assets/css/vendor/nice-select.css">
  <link rel="stylesheet" href="assets/css/plugins/feature.css">
  <link rel="stylesheet" href="assets/css/plugins/jquery-ui.min.css">

  <!-- Style css -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="template-color-1">
  <!-- Preloader -->
  <div class="preloader">
    <div class='loader'>
      <div class='circle'></div>
      <div class='circle'></div>
      <div class='circle'></div>
      <div class='circle'></div>
      <div class='circle'></div>
    </div>
  </div>

  <%- include('sections/header.ejs') -%>

  <div class="collection-hero">
    <img src="<%= collection_banner%>" alt="">
  </div>

  <div class="rn-author-area mb--30 mt_dec--120">
    <div class="container">
      <div class="row padding-tb-50 align-items-center d-flex">
        <div class="col-lg-12">
          <div class="author-wrapper">
            <div class="author-inner">
              <div class="user-thumbnail">
                <img src="<%= collection_logo %>" alt="Collection Logo" onerror="this.src='assets/images/icons/unknown-user.png'">
              </div>
              <div class="rn-author-info-content">
                <h4 class="title nus"> <%= collectionDetails.name %> </h4>
                <div class="follow-area">
                   <div class="follow followers">
                    <span><%=items%> <a class="color-body">Items</a></span>
                  </div>
                  <div class="follow following">
                    <span><%=floor%> XRP <a class="color-body">Floor Price</a></span>
                  </div>
              </div>
                <%if (wallet == collectionDetails.issuer) {%>
                  <div>
                    <div class="follow following">
                      <span><a class="color-body">collection Views: </a><%=collectionDetails.views%></span>
                    </div>
                  </div>
                <%}%>
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="rn-product-area rn-section-gapTop">
    <div class="container"> 
      <div class="row g-5 mt_dec--30">
          <%- include ("models/nft-rows.ejs", {nfts: nfts}) %>
      </div>     
    </div>
  </div>
  <!-- Modal require -->
  <%- include('sections/popup-modal.ejs') -%>



  <%- include('sections/footer.ejs') -%>

  <!-- Start Top To Bottom Area  -->
  <div class="rn-progress-parent">
    <svg class="rn-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <!-- End Top To Bottom Area  -->
  <!-- JS ============================================ -->
  <script src="assets/js/vendor/jquery.js"></script>
  <script src="assets/js/vendor/jquery.nice-select.min.js"></script>
  <script src="assets/js/vendor/jquery-ui.js"></script>
  <script src="assets/js/vendor/modernizer.min.js"></script>
  <script src="assets/js/vendor/feather.min.js"></script>
  <script src="assets/js/vendor/slick.min.js"></script>
  <script src="assets/js/vendor/bootstrap.min.js"></script>
  <script src="assets/js/vendor/sal.min.js"></script>
  <script src="assets/js/vendor/waypoint.js"></script>
  <script src="assets/js/vendor/wow.js"></script>
  <script src="assets/js/vendor/particles.js"></script>
  <script src="assets/js/vendor/jquery.style.swicher.js"></script>
  <script src="assets/js/vendor/js.cookie.js"></script>
  <script src="assets/js/vendor/count-down.js"></script>
  <script src="assets/js/vendor/counter-up.js"></script>
  <script src="assets/js/vendor/isotop.js"></script>
  <script src="assets/js/vendor/imageloaded.js"></script>
  <script src="assets/js/vendor/backtoTop.js"></script>
  <script src="assets/js/vendor/scrolltrigger.js"></script>
  <script src="assets/js/vendor/jquery.custom-file-input.js"></script>
  <script src="assets/js/vendor/savePopup.js"></script>
  <script src="assets/js/vendor/jquery.endless-scroll.js"></script>
  <!-- main JS -->
  <script src="assets/js/main.js"></script>
  <script>
    var iteration = 0;
    var marker = 1;
    $('#fetchCollection').on('click', function () {
      
    });
    $(window).data('getReady', true).scroll(function(e) {
      if ($(window).data('getReady') == false) return;

      if ($(document).height() - $(this).height() - 2000 < $(this).scrollTop()) {
        console.log("2000")
        $(window).data('getReady', false);
        $.get(`<%=url%>/get-additional-collection-nfts?name=<%=collectionDetails.name%>&issuer=<%=collectionDetails.issuer%>&marker=${marker}&markerIteration=${iteration}`,
         function(data) {
           iteration++;
           var updateNfts = [];
           $("#exploreSection").append(data[0])
           marker = data[1]
           const cardsUnlisted = document.getElementById("exploreSection").querySelectorAll(".col-5");
           cardsUnlisted.forEach(element => {
             element.classList.add("sal-animate")
           });
           $(window).data('getReady', true);
         }
        )

      }
    })
  </script>
</body>

</html>